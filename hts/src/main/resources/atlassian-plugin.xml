<?xml version="1.0" encoding="UTF-8"?>

<atlassian-plugin key="${project.groupId}.${project.artifactId}"
	name="${project.name}" plugins-version="2">
	<plugin-info>
		<description>${project.description}</description>
		<version>${project.version}</version>
		<vendor name="${project.organization.name}" url="${project.organization.url}" />
		<param name="plugin-icon">images/pluginIcon.png</param>
		<param name="plugin-logo">images/pluginLogo.png</param>
	</plugin-info>
	<!-- add our i18n resource -->
	<resource type="i18n" name="i18n" location="hts" />
	<!-- add our web resources -->
	<web-resource key="hts-resources" name="hts Web Resources">
		<dependency>com.atlassian.auiplugin:ajs</dependency>
		<dependency>com.atlassian.auiplugin:aui-date-picker</dependency>
		<dependency>com.atlassian.auiplugin:aui-experimental-iconfont
		</dependency>
		<resource type="download" name="images/" location="/images" />

		<resource type="download" name="shared.css" location="/css-new/shared.css" />
		<resource type="download" name="hts.css" location="/css/hts.css" />
		<resource type="download" name="controlPageStyles.css" location="/css/controlPageStyles.css" />
		<resource type="download" name="verificationPageStyles.css" location="/css/verificationPageStyles.css"/>
		<resource type="download" name="jquery.multiselect2side.css" location="/css/jquery.multiselect2side.css" />

		<!-- OLD JS FILES -->
		<resource type="download" name="jquery.multiselect2side.js" location="/js/jquery.multiselect2side.js" />
		<resource type="download" name="jquery.tinysort.min.js" location="/js/jquery.tinysort.min.js" />
		<resource type="download" name="formValidation.js" location="/js/formValidation.js" />
		<resource type="download" name="date.js" location="/js/date.js" />
		<resource type="download" name="purl.js" location="/js/purl.js" />
		<resource type="download" name="jquery.cookie.js" location="/js/jquery.cookie.js" />

		<resource type="download" name="htsFormsValidation.js" location="/js/htsFormsValidation.js" />
		<resource type="download" name="htsHazardReport.js" location="/js/htsHazardReport.js" />
		<resource type="download" name="hazardAui.js" location="/js/hazardAui.js" />
		<resource type="download" name="htsCausePage.js" location="/js/htsCausePage.js" />
		<resource type="download" name="htsControlPage.js" location="/js/htsControlPage.js" />
		<resource type="download" name="htsVerificationPage.js" location="/js/htsVerificationPage.js"/>
		<!-- <context>hts</context> -->
	</web-resource>

	<!-- The shared resource package -->
	<web-resource name="HTSResources" key="HTSResources">
		<dependency>com.atlassian.auiplugin:ajs</dependency>
		<dependency>com.atlassian.auiplugin:aui-date-picker</dependency>

		<resource type="download" name="images/" location="/images" />

		<resource name="purl.js" type="download" location="/js/purl.js" />
		<resource name="history.js" type="download" location="/js/history.js" />
		<resource name="jquery.multiselect2side.css" type="download" location="/css/jquery.multiselect2side.css" />
		<resource name="jquery.multiselect2side.js" type="download" location="/js/jquery.multiselect2side.js" />
		<resource name="formValidation.js" type="download" location="/js/formValidation.js" />

		<resource name="shared.css" type="download" location="/css-new/shared.css" />
		<resource name="shared-router.js" type="download" location="/js-new/shared-router.js" />
		<resource name="shared-general.js" type="download" location="/js-new/shared-general.js" />
		<resource name="shared-rest.js" type="download" location="/js-new/shared-rest.js" />
		<resource name="shared-cookies.js" type="download" location="/js-new/shared-cookies.js" />

		<resource name="mission-page.css" type="download" location="/css-new/mission-page.css" />
		<resource name="mission-page.js" type="download" location="/js-new/mission-page.js" />

		<resource name="hazard-page.css" type="download" location="/css-new/hazard-page.css" />
		<resource name="hazard-page.js" type="download" location="/js-new/hazard-page.js" />

		<resource name="cause-page.css" type="download" location="/css-new/cause-page.css" />
		<resource name="cause-page.js" type="download" location="/js-new/cause-page.js" />

		<context>HTSContext</context>
	</web-resource>

	<!-- import from the product container -->
	<component-import key="applicationProperties"
		interface="com.atlassian.sal.api.ApplicationProperties" />
	<!-- Here are all Active objects declarations. -->
	<ao key="ao-module">
		<description>The module configuring active objects service
		</description>
		<entity>org.fraunhofer.plugins.hts.db.Hazards</entity>
		<entity>org.fraunhofer.plugins.hts.db.CausesToHazards</entity>
		<entity>org.fraunhofer.plugins.hts.db.ControlToHazard</entity>
		<entity>org.fraunhofer.plugins.hts.db.CausesToHazards</entity>
		<entity>org.fraunhofer.plugins.hts.db.Hazard_Causes</entity>
		<entity>org.fraunhofer.plugins.hts.db.Hazard_Controls</entity>
		<entity>org.fraunhofer.plugins.hts.db.ControlToCause</entity>
		<entity>org.fraunhofer.plugins.hts.db.Hazard_Group</entity>
		<entity>org.fraunhofer.plugins.hts.db.Risk_Categories</entity>
		<entity>org.fraunhofer.plugins.hts.db.Risk_Likelihoods</entity>
		<entity>org.fraunhofer.plugins.hts.db.Verifications</entity>
		<entity>org.fraunhofer.plugins.hts.db.VerificationType</entity>
		<entity>org.fraunhofer.plugins.hts.db.VerificationStatus</entity>
		<entity>org.fraunhofer.plugins.hts.db.VerifcToHazard</entity>
		<entity>org.fraunhofer.plugins.hts.db.VerifcToControl</entity>
		<entity>org.fraunhofer.plugins.hts.db.Subsystems</entity>
		<entity>org.fraunhofer.plugins.hts.db.Review_Phases</entity>
		<entity>org.fraunhofer.plugins.hts.db.SubsystemToHazard</entity>
		<entity>org.fraunhofer.plugins.hts.db.GroupToHazard</entity>
		<entity>org.fraunhofer.plugins.hts.db.Mission_Phase</entity>
		<entity>org.fraunhofer.plugins.hts.db.PhaseToHazard</entity>
		<entity>org.fraunhofer.plugins.hts.db.ControlGroups</entity>
		<entity>org.fraunhofer.plugins.hts.db.Transfers</entity>
	</ao>
	<component-import key="ao" interface="com.atlassian.activeobjects.external.ActiveObjects" filter="" />
	<component-import key="eventPublisher" interface="com.atlassian.event.api.EventPublisher"/>
	<component key="tx-processor" name="Transactional Annotation Processor" class="com.atlassian.activeobjects.external.TransactionalAnnotationProcessor">
		<decription>Processes @Transactional annotations.</decription>
	</component>
	<component key="eventListener" class="org.fraunhofer.plugins.hts.issues.PluginListener">
		<description>Class that processes the incoming JIRA issue events.</description>
	</component>
	<component key="PluginInstallation" class="org.fraunhofer.plugins.hts.issues.PluginInstallation" public="true">
		<interface>com.atlassian.sal.api.lifecycle.LifecycleAware</interface>
	</component>
	<component key="Hazard-service" name="Hazard Service" class="org.fraunhofer.plugins.hts.db.service.impl.HazardServiceImpl" />
	<component key="HazardGroup-service" name="Hazard Group Service" class="org.fraunhofer.plugins.hts.db.service.impl.HazardGroupServiceImpl" />
	<component key="RiskCategory-service" name="Risk Category" class="org.fraunhofer.plugins.hts.db.service.impl.RiskCategoryServiceImpl" />
	<component key="RiskLikelihood-service" name="Risk Likelihood" class="org.fraunhofer.plugins.hts.db.service.impl.RiskLikelihoodsServiceImpl" />
	<component key="Subsystems-service" name="Subsystems service" class="org.fraunhofer.plugins.hts.db.service.impl.SubsystemServiceImpl" />
	<component key="ReviewPhase-service" name="ReviewPhase service" class="org.fraunhofer.plugins.hts.db.service.impl.ReviewPhaseServiceImpl" />
	<component key="MissionPayload-service" name="MissionPayload service" class="org.fraunhofer.plugins.hts.db.service.impl.JIRAProjectServiceImpl" />
	<component key="MissionPhase-service" name="MissionPhase service" class="org.fraunhofer.plugins.hts.db.service.impl.MissionPhaseServiceImpl" />
	<component key="HazardControl-service" name="HazardControl service" class="org.fraunhofer.plugins.hts.db.service.impl.HazardControlServiceImpl" />
	<component key="ControlGroups-service" name="ControlGroups service" class="org.fraunhofer.plugins.hts.db.service.impl.ControlGroupsServiceImpl" />
	<component key="HazardCause-service" name="HazardCause service" class="org.fraunhofer.plugins.hts.db.service.impl.HazardCauseServiceImpl" />
	<component key="TransferCause-service" name="TransferCause service" class="org.fraunhofer.plugins.hts.db.service.impl.TransferServiceImpl" />
	<component key="Verification-service" name="Verification service" class="org.fraunhofer.plugins.hts.db.service.impl.VerificationServiceImpl"/>
	<component key="VerificationType-service" name="VerificationType service" class="org.fraunhofer.plugins.hts.db.service.impl.VerificationTypeServiceImpl"/>
	<component key="VerificationStatus-service" name="VerificationStatus service" class="org.fraunhofer.plugins.hts.db.service.impl.VerificationStatusServiceImpl"/>
	<component-import key="templateRenderer" interface="com.atlassian.templaterenderer.TemplateRenderer" filter="" />

	<web-item name="HTS Plugin" i18n-name-key="hts-plugin.name"
		key="hts-plugin.name" section="system.top.navigation.bar" weight="1000">
		<description key="hts-plugin.description">HTS Plugin</description>
		<label key="hts-plugin.label" />
		<link>/plugins/servlet/missions</link>
		<condition
			class="com.atlassian.jira.plugin.webfragment.conditions.JiraGlobalPermissionCondition">
			<param name="permission">user</param>
		</condition>
	</web-item>

	<servlet name="Mission Servlet" i18n-name-key="mission-servlet.name"
		key="mission-servlet" class="org.fraunhofer.plugins.hts.servlet.MissionServlet">
		<description key="mission-servlet.description">Mission Servlet</description>
		<url-pattern>/missions</url-pattern>
	</servlet>

	<servlet name="Report Generation Servlet" i18n-name-key="report-generation-servlet.name"
		key="report-generation-servlet" class="org.fraunhofer.plugins.hts.servlet.ReportGenerationServlet">
		<description key="report-generation-servlet.description">Report Generation Servlet</description>
		<url-pattern>/report-generation</url-pattern>
	</servlet>

	<servlet name="Hazards Servlet" i18n-name-key="hazards-servlet.name"
		key="hazards-servlet" class="org.fraunhofer.plugins.hts.servlet.HazardServlet">
		<description key="hazards-servlet.description">Hazards Servlet</description>
		<url-pattern>/hazards</url-pattern>
	</servlet>

	<servlet name="Causes Servlet" i18n-name-key="causes-servlet.name"
		key="causes-servlet" class="org.fraunhofer.plugins.hts.servlet.CauseServlet">
		<description key="causes-servlet.description">Causes Servlet</description>
		<url-pattern>/causes</url-pattern>
	</servlet>

	<servlet name="Controls Servlet" i18n-name-key="controls-servlet.name"
		key="controls-servlet" class="org.fraunhofer.plugins.hts.servlet.ControlsServlet">
		<description key="controls-servlet.description">Controls Servlet</description>
		<url-pattern>/controls</url-pattern>
	</servlet>

	<servlet name="Verifications Servlet" i18n-name-key="verifications-servlet.name"
		key="verifications-servlet" class="org.fraunhofer.plugins.hts.servlet.VerificationsServlet">
		<description key="verifications-servlet.description">Verifications Servlet</description>
		<url-pattern>/verifications</url-pattern>
	</servlet>








<!-- 	<rest name="Hazard Resource" i18n-name-key="hazard-resource.name"
		key="hazard-resource" path="/htsrest" version="1.0">
		<description key="hazard-resource.description">The Hazard Resource Plugin</description>
	</rest> -->

	<rest name="Mission REST Service" i18n-name-key="mission-rest.name"
		key="mission-rest" path="/hts" version="1.0">
		<description key="mission-rest.description">Mission REST Service</description>
	</rest>

	<rest name="Hazard REST Service" i18n-name-key="hazard-rest.name"
		key="hazard-rest" path="/hts" version="1.0">
		<description key="hazard-rest.description">Hazard REST Service</description>
	</rest>

	<rest name="Cause REST Service" i18n-name-key="cause-rest.name"
		key="cause-rest" path="/hts" version="1.0">
		<description key="cause-rest.description">Cause REST Service</description>
	</rest>

</atlassian-plugin>