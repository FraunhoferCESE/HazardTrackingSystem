#macro( substr $text $length)
	#if($text.length() > $length)
		#set( $endIndex = $length - 1)
		$text.substring(0, $endIndex)...
	#else
		$text
	#end
#end

<div id="ControlTableEntryID$control.getID()">
	<span class="ControlTableToggle aui-icon aui-icon-small aui-iconfont-add">Expand/Collapse Form</span>
	<span class="controlNumber">Control $cause.getCauseNumber().$control.getControlNumber()</span>
	<span class="controlDescription">
		#substr($control.getDescription() 75)
	</span>
	<span class="HTSDate controlDate">$control.getLastUpdated()</span>
	<input type="checkbox" value="$control.getID()" class="ControlPageDeleteBox">	
</div>

<div id="ControlTableEntryContentID$control.getID()" class="HazardPropertyContentRow">
	<div class="HazardPropertyContentHolder">
		<form method="post" action="controls" class="aui ControlPageFormExisting">
			<input type="hidden" name="regular" id="regular" value="true">
			<input type="hidden" name="existing" id="existing" value="true">
			<input type="hidden" name="hazardID" id="hazardID" value="$!hazard.getID()">
			<input type="hidden" name="controlID" id="controlID" value="$!control.getID()">
			<input type="hidden" name="controlCauseAssociation" id="controlCauseAssociation" value="$control.getID()">
			<div class="field-group" style="padding-bottom: 0">
				<label for="controlDescription"><span class="HTSRequired">* </span>Description</label>
				<textarea class="textarea long-field" name="controlDescription" id="controlDescription">$!control.getDescription()</textarea>
			</div>
			<div class="field-group HTSRequiredContainer" style="padding-top: 0" data-error="controlDescription">
				<span class="HTSRequired">This field is required.</span>
			</div>
			<div class="field-group">
				<label for="controlGroup">Control group</label>
				<select class="select" id="controlGroup" name="controlGroup">
					#if (!$control.getControlGroup())
						<option value="" selected>-Select-</option>
					#else
						<option value="">-Select-</option>
					#end
					#foreach ($controlGroup in $controlGroups)
						#if ($controlGroup.getID() == $control.getControlGroup().getID())
							<option value="$controlGroup.getID()" selected>$!controlGroup.getLabel()</option>
						#else
							<option value="$controlGroup.getID()">$!controlGroup.getLabel()</option>
						#end
					#end
				</select>
			</div>
			<div class="field-group">
				<label>Verifications</label>
				<div class="associatedVerifications">
					#parse("/templates/control-associated-verifications.vm")
				</div>
			</div>
		</form>
	</div>
</div>